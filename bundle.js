!function(n){var i={};function a(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=n,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=66)}([function(e){e.exports=JSON.parse('{"global":{"pause":"Escape"},"player1":{"up":"ArrowUp","right":"ArrowRight","down":"ArrowDown","left":"ArrowLeft","stop":"Space"},"player2":{"up":"KeyW","right":"KeyD","down":"KeyS","left":"KeyA","stop":"ControlLeft"}}')},function(e,t,n){e.exports=n.p+"sounds/i see u9201fdbd8df6ba76fc9905f716dcd8a3.wav"},function(e,t,n){e.exports=n.p+"images/heartf8c80154c2b405d07e94a26a2c753358.png"},function(e,t,n){e.exports=n.p+"images/stone_isolated530604dccd1027bb334d370e760672af.png"},function(e,t,n){e.exports=n.p+"images/stone_connectedLeft03e139b568e980c526f258a3fdbe2db3.png"},function(e,t,n){e.exports=n.p+"images/stone_connectedRight9630d0eca64a83f89c85a677b7ed0591.png"},function(e,t,n){e.exports=n.p+"images/stone_connectedTop425f2bf74a3c530d5145f009797caeef.png"},function(e,t,n){e.exports=n.p+"images/stone_connectedBottome35dac4c9000db1c2bf2b433503548ac.png"},function(e,t,n){e.exports=n.p+"images/stone_betweenHorizontal1bcac0e006e6ca70e9cdb1de5d239275.png"},function(e,t,n){e.exports=n.p+"images/stone_betweenVertical0fa8ed46940ffb0b40e92112c3bb5117.png"},function(e,t,n){e.exports=n.p+"images/stone_connectedBottomAndRight8853bd17731c3da6469566ae81ac86eb.png"},function(e,t,n){e.exports=n.p+"images/stone_connectedBottomAndLeft2d0d1517c16a635f1cf88794aea50b78.png"},function(e,t,n){e.exports=n.p+"images/stone_connectedTopAndLefte4f30c376a7d801637aef9b31e930b61.png"},function(e,t,n){e.exports=n.p+"images/stone_connectedTopAndRight0a8ce7f24cb6bb02ecc7760ff51b53d8.png"},function(e,t,n){e.exports=n.p+"images/stone_connectedAllcea47e078b48229b4f5521d0aefc3fa1.png"},function(e,t,n){e.exports=n.p+"images/stone_betweenVertical_connectedLeftb70cfaea10c2845ab31e8b7a0ea7d81e.png"},function(e,t,n){e.exports=n.p+"images/stone_betweenVertical_connectedRight1a92a44c4aa5ed6fedf011e2d48550b3.png"},function(e,t,n){e.exports=n.p+"images/stone_betweenHorizontal_connectedTopb680910a072ca770c146a7da80b5f968.png"},function(e,t,n){e.exports=n.p+"images/stone_betweenHorizontal_connectedBottom0096561effda01952033463a7c317b8c.png"},function(e,t,n){e.exports=n.p+"images/cell4bda028508a52dd3adf210d58377467d.png"},function(e,t,n){e.exports=n.p+"images/player1_anim1_right9bfd7ee41213f2b0d23c74bc007407e0.png"},function(e,t,n){e.exports=n.p+"images/player1_anim2_right93e98b2990c304402f842e201d1bb7bf.png"},function(e,t,n){e.exports=n.p+"images/player1_anim3_right9eca4886517844d4c1a305e07a6f1115.png"},function(e,t,n){e.exports=n.p+"images/player1_anim4_rightfb5bd7c62007dec510cca01da7a899b2.png"},function(e,t,n){e.exports=n.p+"images/player1_anim5_rightf7838ce0a537ad5af948f0456dcbc121.png"},function(e,t,n){e.exports=n.p+"images/player1_anim6_rightec1634d5b0f7c26fae439e1aed6e415b.png"},function(e,t,n){e.exports=n.p+"images/player1_anim1_left74c51faf5445f93500a60b19df0e5a60.png"},function(e,t,n){e.exports=n.p+"images/player1_anim2_leftee23cf4539e17c1d6f1c61faf26ff28f.png"},function(e,t,n){e.exports=n.p+"images/player1_anim3_lefta4c029cb1b495f9e5e7b283ade93f035.png"},function(e,t,n){e.exports=n.p+"images/player1_anim4_left78912436b9af436f1f0a39aa452c5f92.png"},function(e,t,n){e.exports=n.p+"images/player1_anim5_left4b614f7b9a920a93a425f140849dc866.png"},function(e,t,n){e.exports=n.p+"images/player1_anim6_left487edb28d9709968bf913ea3ace284a6.png"},function(e,t,n){e.exports=n.p+"images/player1_stop_left047f294e8721689677ee3d9ba0e09c36.png"},function(e,t,n){e.exports=n.p+"images/player1_stop_right3a87b216056a94be56b079b064e807f5.png"},function(e,t,n){e.exports=n.p+"images/player1_anim1_rightc4f016a580fd2ff41d47cea346aecae5.png"},function(e,t,n){e.exports=n.p+"images/player1_anim2_right7899f2d9a1694336822ff7499c1698fe.png"},function(e,t,n){e.exports=n.p+"images/player1_anim3_right1452f4fe40a23fb1b284b3e0728bb715.png"},function(e,t,n){e.exports=n.p+"images/player1_anim4_right80e4acdf866ef708dc8d10cc06275778.png"},function(e,t,n){e.exports=n.p+"images/player1_anim5_rightf0d145b022a1817b604cfd42c494e174.png"},function(e,t,n){e.exports=n.p+"images/player1_anim6_right93985d7aa35df70c970e38334c23d1f6.png"},function(e,t,n){e.exports=n.p+"images/player1_anim1_leftb7fab3f38ce3b2c4a50658e441e5aa0b.png"},function(e,t,n){e.exports=n.p+"images/player1_anim2_left5a5c8cdbd4872019b0212d5e9e27579c.png"},function(e,t,n){e.exports=n.p+"images/player1_anim3_left3034cec480c1ab93c7bc3ffbb25ba22e.png"},function(e,t,n){e.exports=n.p+"images/player1_anim4_left03e31c46ea239c8e114e6e5ef1ad806b.png"},function(e,t,n){e.exports=n.p+"images/player1_anim5_leftb5168e4879660df2952382b2339f240c.png"},function(e,t,n){e.exports=n.p+"images/player1_anim6_leftdc340c94f10ab1a3a9e2032d0975d705.png"},function(e,t,n){e.exports=n.p+"images/player1_stop_left0ff5ab0edfe96004b7820e37578c7767.png"},function(e,t,n){e.exports=n.p+"images/player1_stop_rightcf3afb9daa4988440956736fcd21610d.png"},function(e,t,n){e.exports=n.p+"images/enemy128087a3ed038bce3dc5871c54675ce40.png"},function(e,t,n){e.exports=n.p+"images/enemy2066236c2c492be49c88a1991c759c956.png"},function(e,t,n){e.exports=n.p+"images/enemy3c32ee739417f4d7e20e15f4528c24579.png"},function(e,t,n){e.exports=n.p+"images/enemy44d0f2d31a3ec4093d4f5fa72722e686c.png"},function(e,t,n){e.exports=n.p+"images/coin1174086130a29db6bd8b68eb8d4ea3944.png"},function(e,t,n){e.exports=n.p+"images/coin21014ba4e51873018ada0e0e85694068e.png"},function(e,t,n){e.exports=n.p+"images/coin3777c81244a45759066080a7ebc97ddc0.png"},function(e,t,n){e.exports=n.p+"images/coin41022d70d9b4eea50c95a7d52baddfe70.png"},function(e,t,n){e.exports=n.p+"images/coin5aa0cd54f2f444f6d5e26cbd797d5085e.png"},function(e,t,n){e.exports=n.p+"images/coin6d2318616b4617445adf4057d29149b13.png"},function(e,t,n){e.exports=n.p+"images/trap136f832c521207ef3736e296742c1406e.png"},function(e,t,n){e.exports=n.p+"images/trap262e702b493194bc9124e141c15fa01c9.png"},function(e,t,n){e.exports=n.p+"images/trap30b734cdd970ea5ee118791a1f9c6354a.png"},function(e,t,n){e.exports=n.p+"images/trap4efecbf66c8494d6f0d7b14957bd8e47f.png"},function(e,t,n){e.exports=n.p+"sounds/coin276507ac96a9c75bc2ab6f40f74a19547.mp3"},function(e,t,n){e.exports=n.p+"sounds/die28830f4f9d51d5cbde981f0bac91bbece.mp3"},function(e,t,n){e.exports=n.p+"sounds/game24cae90fe7b0109f2b340f117ebd0a39.mp3"},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(65);var i=n(3),a=n.n(i),s=n(4),o=n.n(s),r=n(5),c=n.n(r),p=n(6),l=n.n(p),h=n(7),f=n.n(h),d=n(8),u=n.n(d),m=n(9),g=n.n(m),b=n(10),v=n.n(b),w=n(11),y=n.n(w),S=n(12),_=n.n(S),k=n(13),C=n.n(k),L=n(14),I=n.n(L),x=n(15),E=n.n(x),Y=n(16),G=n.n(Y),X=n(17),O=n.n(X),j=n(18),T=n.n(j),P=n(19),A=n.n(P),B=n(20),R=n.n(B),z=n(21),H=n.n(z),$=n(22),M=n.n($),W=n(23),D=n.n(W),F=n(24),N=n.n(F),q=n(25),V=n.n(q),K=n(26),J=n.n(K),U=n(27),Q=n.n(U),Z=n(28),ee=n.n(Z),te=n(29),ne=n.n(te),ie=n(30),ae=n.n(ie),se=n(31),oe=n.n(se),re=n(32),ce=n.n(re),pe=n(33),le=n.n(pe),he=n(34),fe=n.n(he),de=n(35),ue=n.n(de),me=n(36),ge=n.n(me),be=n(37),ve=n.n(be),we=n(38),ye=n.n(we),Se=n(39),_e=n.n(Se),ke=n(40),Ce=n.n(ke),Le=n(41),Ie=n.n(Le),xe=n(42),Ee=n.n(xe),Ye=n(43),Ge=n.n(Ye),Xe=n(44),Oe=n.n(Xe),je=n(45),Te=n.n(je),Pe=n(46),Ae=n.n(Pe),Be=n(47),Re=n.n(Be),ze=n(48),He=n.n(ze),$e=n(49),Me=n.n($e),We=n(50),De=n.n(We),Fe=n(51),Ne=n.n(Fe),qe=n(52),Ve=n.n(qe),Ke=n(53),Je=n.n(Ke),Ue=n(54),Qe=n.n(Ue),Ze=n(55),et=n.n(Ze),tt=n(56),nt=n.n(tt),it=n(57),at=n.n(it),st=n(58),ot=n.n(st),rt=n(59),ct=n.n(rt),pt=n(60),lt=n.n(pt),ht=n(61),ft=n.n(ht),dt=n(62),ut=n.n(dt),mt=n(1),gt=n.n(mt),bt=n(63),vt=n.n(bt);function wt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function yt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function St(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _t(e,t,n){return t&&St(e.prototype,t),n&&St(e,n),e}var kt=new Image;kt.src=a.a;var Ct=new Image;Ct.src=o.a;var Lt=new Image;Lt.src=c.a;var It=new Image;It.src=l.a;var xt=new Image;xt.src=f.a;var Et=new Image;Et.src=u.a;var Yt=new Image;Yt.src=g.a;var Gt=new Image;Gt.src=v.a;var Xt=new Image;Xt.src=y.a;var Ot=new Image;Ot.src=_.a;var jt=new Image;jt.src=C.a;var Tt=new Image;Tt.src=I.a;var Pt=new Image;Pt.src=E.a;var At=new Image;At.src=G.a;var Bt=new Image;Bt.src=O.a;var Rt=new Image;Rt.src=T.a;var zt=new Image;zt.src=A.a;var Ht=new Image;Ht.src=R.a;var $t=new Image;$t.src=H.a;var Mt=new Image;Mt.src=M.a;var Wt=new Image;Wt.src=D.a;var Dt=new Image;Dt.src=N.a;var Ft=new Image;Ft.src=V.a;var Nt=new Image;Nt.src=J.a;var qt=new Image;qt.src=Q.a;var Vt=new Image;Vt.src=ee.a;var Kt=new Image;Kt.src=ne.a;var Jt=new Image;Jt.src=ae.a;var Ut=new Image;Ut.src=oe.a;var Qt=new Image;Qt.src=ce.a;var Zt=new Image;Zt.src=le.a;var en=new Image;en.src=fe.a;var tn=new Image;tn.src=ue.a;var nn=new Image;nn.src=ge.a;var an=new Image;an.src=ve.a;var sn=new Image;sn.src=ye.a;var on=new Image;on.src=_e.a;var rn=new Image;rn.src=Ce.a;var cn=new Image;cn.src=Ie.a;var pn=new Image;pn.src=Ee.a;var ln=new Image;ln.src=Ge.a;var hn=new Image;hn.src=Oe.a;var fn=new Image;fn.src=Te.a;var dn=new Image;dn.src=Ae.a;var un=new Image;un.src=Re.a;var mn=new Image;mn.src=He.a;var gn=new Image;gn.src=Me.a;var bn=new Image;bn.src=De.a;var vn=new Image;vn.src=Ne.a;var wn=new Image;wn.src=Ve.a;var yn=new Image;yn.src=Je.a;var Sn=new Image;Sn.src=Qe.a;var _n=new Image;_n.src=et.a;var kn=new Image;kn.src=nt.a;var Cn=new Image;Cn.src=at.a;var Ln=new Image;Ln.src=ot.a;var In=new Image;In.src=ct.a;var xn=new Image;xn.src=lt.a;var En=new Image;function Yn(e,t,n,i,a,s){if(a&&s){var o=window.Game.findCell({posX:a,posY:s});a=o.posX,s=o.posY}var r={type:t,id:t+e,visible:!0,material:i,posX:a,posY:s,eventList:[],eventListByTime:[],sprite:null,spriteList:[],animateSpriteCount:0,animateSpeedCount:0,animateSpeed:1,spriteWidth:0,spriteHeight:0,spriteOffsetX:0,spriteOffsetY:0};return r.die=function(){window.Game.removeObject(this)}.bind(r),r.staticAnimate=function(){this.animateSpeedCount===this.animateSpeed?(this.animateSpeedCount=0,this.animateSpriteCount===this.spriteList.length-1?this.animateSpriteCount=0:this.animateSpriteCount+=1,this.sprite=this.spriteList.getSprite(this.animateSpriteCount,this.direction)):this.animateSpeedCount+=1}.bind(r),r.moveAnimate=function(){if(!this.moves)return this.animateSpriteCount=0,this.animateSpeedCount=0,void(this.sprite=this.spriteList.getStopSprite(this.direction));this.animateSpeedCount===this.animateSpeed?(this.animateSpeedCount=0,this.animateSpriteCount===this.spriteList.length-1?this.animateSpriteCount=0:this.animateSpriteCount+=1,this.sprite=this.spriteList.getSprite(this.animateSpriteCount,this.direction)):this.animateSpeedCount+=1}.bind(r),n instanceof Rn?n.default?(r.spriteList=n,r.sprite=n.default[0],r.eventList.push(new Bn("staticAnimate",r.staticAnimate,!1))):(r.spriteList=n,r.sprite=n.right[0],r.eventList.push(new Bn("moveAnimate",r.moveAnimate,!1))):n.length?(r.spriteList=n,r.sprite=n[0]):r.sprite=n,r.addEvent=function(t,e,n,i,a){i&&(this.eventList=this.eventList.filter(function(e){return e.id!=="event"+t})),this.eventList.push(new Bn(t||this.eventList.length,e,n,i,a))}.bind(r),r.addEventToStart=function(t,e,n,i,a){i&&(this.eventList=this.eventList.filter(function(e){return e.id!=="event"+t})),this.eventList.unshift(new Bn(t||this.eventList.length,e,n,i,a))}.bind(r),r.addEventByTime=function(t,e,n,i,a,s,o){i&&(this.eventListByTime=this.eventListByTime.filter(function(e){return e.id!=="event"+t})),this.eventListByTime.push(new Bn(t||this.eventListByTime.length,e,n,i,a,s,o))},r.removeEvent=function(t){this.eventList.find(function(e){return e.id===t}).removable=!0,this.eventList=this.eventList.filter(function(e){return e.id!==t})},r.startEvents=function(){var t=[];0<this.eventList.length&&(this.eventList.forEach(function(e){e.func(),e.removable||t.push(e)}),this.eventList=t)}.bind(r),r.startEventsByTime=function(t){var n=[];0<this.eventListByTime.length&&(this.eventListByTime.forEach(function(e){e.timeOfAlive&&e.aliveTimeCounter<=0?e.dieCallBack():(e.timeCounter&&t%e.timeCounter!=0?n.push(e):(e.func(),e.removable||n.push(e)),e.timeOfAlive&&e.aliveTimeCounter&&e.aliveTimeCounter--)}),this.eventListByTime=n)}.bind(r),r.checkClash=function(e,t){if(e.id!==this.id){var n,i,a=t/2,s=this.posX-a,o=this.posX+a,r=this.posY-a,c=this.posY+a,p=e.posX-a,l=e.posX+a,h=e.posY-a,f=e.posY+a;if(h<c&&r<f&&s<l&&p<o)if(this.clash(e),e.clash(this),"stone"===this.type)switch(n=this.posX<e.posX?"right":this.posX>e.posX?"left":"one level",i=this.posY<e.posY?"bottom":this.posY>e.posY?"top":"one level",Math.abs(this.posX-e.posX)>Math.abs(this.posY-e.posY)?n:i){case"right":"left"===e.direction&&(e.addEventToStart("stop",e.stopMove,!0),e.posX+=e.speed);break;case"left":"right"===e.direction&&(e.addEventToStart("stop",e.stopMove,!0),e.posX-=e.speed);break;case"bottom":"top"===e.direction&&(e.addEventToStart("stop",e.stopMove,!0),e.posY+=e.speed);break;case"top":"bottom"===e.direction&&(e.addEventToStart("stop",e.stopMove,!0),e.posY-=e.speed)}}}.bind(r),r.clash=function(e){}.bind(r),r}function Gn(e,t,n,i,a,s,o){var r=new Yn(e,t,n,!0,i,a);return r.hp=s||100,r.direction="top",r.moves=!1,r.speed=o||1,r.spawnPosX=i,r.spawnPosY=a,r.changeDirection=function(t){if(("left"!==this.direction&&"right"!==this.direction||"left"!==t&&"right"!==t)&&("top"!==this.direction&&"bottom"!==this.direction||"top"!==t&&"bottom"!==t))this.addEventToStart("tryChangeDirection",function(){var e=window.Game.findCell({object:{posX:r.posX,posY:r.posY},direction:t});r.posX/20%2==1&&r.posY/20%2==1&&e&&0<e.objects.length&&"stone"!==e.objects[0].type&&(r.direction=t,this.removable=!0)},!1,!0);else{this.direction=t;var e=this.eventList.find(function(e){return"eventtryChangeDirection"===e.id});e&&(e.removable=!0)}}.bind(r),r.startMove=function(){this.moves=!0}.bind(r),r.stopMove=function(){this.moves=!1}.bind(r),r.move=function(){if(this.moves)switch(this.direction){case"left":this.posX-=this.speed;break;case"right":this.posX+=this.speed;break;case"top":this.posY-=this.speed;break;case"bottom":this.posY+=this.speed}}.bind(r),r}function Xn(e,t,n,i,a,s){var o;switch(s){case 0:o=new Rn({left:[Nt,qt,Vt,Kt,Jt,Ut],right:[Ht,$t,Mt,Wt,Dt,Ft],stop:{left:Qt,right:Zt}});break;case 1:o=new Rn({left:[rn,cn,pn,ln,hn,fn],right:[en,tn,nn,an,sn,on],stop:{left:dn,right:un}})}var r,c=new Gn(e,"player",o,t,n,3,5);switch(s){case 0:r=window.Game.findCell({fieldPosRow:1,fieldPosColumn:1});break;case 1:r=window.Game.findCell({fieldPosRow:1,fieldPosColumn:21})}return c.spawnPosX=r.posX,c.spawnPosY=r.posY,c.playerNumber=s,c.nickName=i||"Unamed",c.score=a||0,c.spriteWidth=49,c.spriteHeight=53,c.spriteOffsetX=0,c.spriteOffsetY=-6,c.killed=!1,c.rebornTime=10,c.rebornCounter=0,c.eventList.push(new Bn("move",c.move,!1,!0)),c.reborn=function(e,t){this.rebornCounter=this.rebornTime-(window.Game.getGameTime()-e),0===this.rebornCounter&&(this.posX=this.spawnPosX,this.posY=this.spawnPosY,this.killed=!1,this.material=!0,this.visible=!0,t.removable=!0)},c.kill=function(){if(window.Game.players.every(function(e){return 0<e.hp})){var e=new Audio;e.src=vt.a,e.volume=.05,e.play(),this.killed=!0,this.material=!1,this.visible=!1,this.moves=!1,this.posX=100,this.posY=100;var t=window.Game.getGameTime();0<this.hp&&(this.hp-=1),0<this.hp&&(this.rebornCounter=this.rebornTime,this.addEventToStart("reborn",function(){c.reborn(t,this)},!1,!0))}else window.Game.gameOver()}.bind(c),c.upScore=function(e){this.score+=e}.bind(c),c.clash=function(e){"coin"===e.type?this.upScore(1):("trap"===e.type&&e.active||"mob"===e.type)&&this.kill()}.bind(c),c.control=function(e){if(!this.killed)switch(e){case"up":this.changeDirection("top"),this.startMove();break;case"right":this.changeDirection("right"),this.startMove();break;case"down":this.changeDirection("bottom"),this.startMove();break;case"left":this.changeDirection("left"),this.startMove();break;case"stop":this.stopMove()}}.bind(c),c}function On(e,t,n,i){var a=new Gn(e,"mob",new Rn({left:[mn,gn,bn,vn],right:[mn,gn,bn,vn],stop:{left:mn,right:mn}}),t,n,1,5);return a.spriteWidth=60,a.spriteHeight=60,a.spriteOffsetX=0,a.spriteOffsetY=-15,a.typeOfMob=i,a.moves=!0,a.voice=function(){var e=new Audio;e.src=gt.a,e.volume=.005,e.play()}.bind(a),a.watch=function(e,t,n){if(n!==t){var i=window.Game.findCell({posX:this.posX,posY:this.posY}),a=i.fieldPosColumn,s=i.fieldPosRow;switch(e){case"right":a+=n;break;case"left":a-=n;break;case"top":s-=n;break;case"bottom":s+=n}var o=window.Game.findCell({fieldPosRow:s,fieldPosColumn:a});if(o){var r=o.getEnteredEnemies(1);if("stone"!==o.objects[0].type)return 0<r.length?(this.voice(),this.changeDirection(e),void this.startInvestigation()):void this.watch(e,t,n+1)}}}.bind(a),a.startInvestigation=function(){var e=this;this.addEventByTime("investigation",function(){},!1,!0,1,5,function(){e.startWatching()}),this.removeEvent("eventwatch"),this.stopMove()}.bind(a),a.startWatching=function(){var e=this;this.addEvent("watch",function(){e.watch("top",4,0),e.watch("bottom",4,0),e.watch("left",4,0),e.watch("right",4,0)},!1,!1)}.bind(a),a.startWatching(),a.getNewDirection=function(t){var n=this,i=function(e){var t;switch(e){case"top":t="bottom";break;case"bottom":t="top";break;case"left":t="right";break;case"right":t="left"}return t}(this.direction),e=["top","bottom","left","right"].filter(function(e){return e!==n.direction&&e!==i});if(t&&0<t.length&&(e=e.filter(function(e){return!t.includes(e)})),0!==e.length){var a=e[Math.floor(Math.random()*e.length)],s=window.Game.findCell({object:{posX:this.posX,posY:this.posY},direction:a});return s&&0<s.objects.length&&"stone"!==s.objects[0].type?a:((t=t||[]).push(a),this.getNewDirection(t))}this.changeDirection(i)}.bind(a),a.stopMove=function(){var e=this;this.moves=!1;var t=this.getNewDirection();setTimeout(function(){e.changeDirection(t)},1),this.startMove()}.bind(a),a.eventList.push(new Bn("move",a.move,!1,!0)),a}function jn(e,t,n){var i=new Yn(e,"stone",kt,!0,t,n);return i.spriteWidth=40,i.spriteHeight=52,i.spriteOffsetY=-6,i.stoneSprites={isolated:kt,connectedLeft:Ct,connectedRight:Lt,connectedTop:It,connectedBottom:xt,betweenHorizontal:Et,betweenVertical:Yt,connectedBottomAndRight:Gt,connectedBottomAndLeft:Xt,connectedTopAndLeft:Ot,connectedTopAndRight:jt,connectedAll:Tt,betweenVerticalConnectedRight:At,betweenVerticalConnectedLeft:Pt,betweenHorizontalConnectedBottom:Rt,betweenHorizontalConnectedTop:Bt},i.setSprite=function(e){this.stoneSprites[e]&&(this.sprite=this.stoneSprites[e])}.bind(i),i}function Tn(e,t,n){var i=new Yn(e,"coin",new Rn([wn,yn,Sn,_n,kn,Cn]),!0,t,n);return i.spriteWidth=25,i.spriteHeight=28,i.spriteOffsetY=-15,i.animateSpeed=2,i.clash=function(e){if("player"===e.type){window.Game.loot.length<=1&&window.Game.gameWin();var t=new Audio;t.src=ut.a,t.volume=.005,t.play(),this.die()}}.bind(i),i}function Pn(e,t,n,i){var a=new Yn(e,"trap",new Rn([Ln,In,xn,En,xn,In]),!0,t,n);return a.active=!1,a.animateSpeed=1,a.staticAnimate=function(){a.active=3===this.animateSpriteCount||2===this.animateSpriteCount,0===this.animateSpriteCount||3===this.animateSpriteCount?this.animateSpeedCount===this.animateSpeed*i?(this.animateSpriteCount+=1,this.animateSpeedCount=0):this.animateSpeedCount+=1:this.animateSpeedCount===this.animateSpeed?(this.animateSpeedCount=0,this.animateSpriteCount===this.spriteList.length-1?this.animateSpriteCount=0:this.animateSpriteCount+=1,this.sprite=this.spriteList.getSprite(this.animateSpriteCount,this.direction)):this.animateSpeedCount+=1}.bind(a),a.addEvent("staticAnimate",a.staticAnimate,!1,!0),a.clash=function(e){}.bind(a),a}En.src=ft.a;var An=function(){function s(e,t,n,i,a){yt(this,s),this.id="cell"+e,this.posX=t,this.posY=n,this.objects=[],this.sprite=zt,this.visible=!0,this.fieldPosRow=i,this.fieldPosColumn=a}return _t(s,[{key:"set",value:function(e){this.objects.push(e),e.posX=this.posX,e.posY=this.posY,"player"!==e.type&&"mob"!==e.type||(e.spawnPosX=this.posX,e.spawnPosY=this.posY)}},{key:"getEnteredEnemies",value:function(e){var t=this,n=[],i=window.Game.Graphic.cellSize/2;return 2!==e&&e||n.push.apply(n,wt(window.Game.mobs.filter(function(e){return e.posX-i<=t.posX&&e.posX+i>=t.posX&&e.posY-i<=t.posY&&e.posY+i>=t.posY}))),1!==e&&e||n.push.apply(n,wt(window.Game.players.filter(function(e){return e.posX-i<=t.posX&&e.posX+i>=t.posX&&e.posY-i<=t.posY&&e.posY+i>=t.posY}))),n}},{key:"clear",value:function(e){e&&this.objects.forEach(function(e){e.die()}),this.objects=[]}}]),s}(),Bn=function e(t,n,i,a,s,o,r){yt(this,e),this.id="event"+t,this.func=n,this.removable=void 0===i||i,this.uniqueness=void 0!==a&&a,this.timeCounter=s||0,this.timeOfAlive=o||0,this.aliveTimeCounter=o||0,this.dieCallBack=r||function(){}},Rn=function(){function t(e){yt(this,t),e.length?(this.default=e,this.length=e.length):(this.right=e.right,this.left=e.left,e.stop&&(this.stop={right:e.stop.right,left:e.stop.left}),this.length=e.left.length),this.lastDirection="right"}return _t(t,[{key:"getStopSprite",value:function(e){return"right"===e?(this.lastDirection=e,this.stop.right):"left"===e?(this.lastDirection=e,this.stop.left):this.getStopSprite(this.lastDirection)}},{key:"getSprite",value:function(e,t){return t?"right"===t?(this.lastDirection=t,this.right[e]):"left"===t?(this.lastDirection=t,this.left[e]):this.getSprite(e,this.lastDirection):this.default[e]}}]),t}();var zn=n(64),Hn=n.n(zn),$n=[new function e(t,n,i,a,s){yt(this,e),this.stoneList=t,this.traps=n,this.playersFieldCoords=i,this.mobSpawnPoints=a,this.holesInBaseStones=s}([[1,5],[1,8],[1,9],[1,11],[1,13],[1,14],[1,17],[2,2],[2,3],[2,5],[2,7],[2,8],[2,11],[2,14],[2,15],[2,17],[2,19],[2,20],[3,2],[3,7],[3,8],[3,10],[3,11],[3,12],[3,14],[3,15],[3,20],[4,4],[4,5],[4,17],[4,18],[5,1],[5,7],[5,8],[5,9],[5,11],[5,13],[5,14],[5,15],[5,21],[6,3],[6,5],[6,9],[6,11],[6,13],[6,17],[6,19],[7,1],[7,2],[7,3],[7,5],[7,6],[7,11],[7,16],[7,17],[7,19],[7,20],[7,21],[8,8],[8,9],[8,10],[8,11],[8,12],[8,13],[8,14],[9,1],[9,2],[9,3],[9,5],[9,6],[9,16],[9,17],[9,19],[9,20],[9,21],[10,3],[10,5],[10,8],[10,10],[10,12],[10,14],[10,17],[10,19],[11,7],[11,8],[11,10],[11,12],[11,14],[11,15],[12,2],[12,4],[12,5],[12,17],[12,18],[12,20],[13,2],[13,4],[13,5],[13,7],[13,8],[13,10],[13,11],[13,12],[13,14],[13,15],[13,17],[13,18],[13,20],[14,2],[14,4],[14,5],[14,7],[14,10],[14,11],[14,12],[14,15],[14,17],[14,18],[14,20],[15,7],[15,9],[15,10],[15,11],[15,12],[15,13],[15,15]],[[3,5],[3,17],[4,11],[8,5],[8,6],[8,16],[8,17],[10,11],[11,11],[13,3],[13,19]],[[1,1],[1,21]],[[15,8],[15,14],[1,10],[1,12]],[[8,0],[8,22]])],Mn=n(0),Wn=n(2),Dn=n.n(Wn);function Fn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Nn(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function qn(e,t){var n="".concat(e,"=").concat(t,"; max-age=").concat(31536e4);document.cookie=n}function Vn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Kn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Un(e,t,n){return t&&Jn(e.prototype,t),n&&Jn(e,n),e}var Qn=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$gameWindow=document.querySelector(".canvasWrapper"),this.$interface=document.querySelector(".live_interface"),this.$blockInfo=document.querySelector(".block-info"),this.$btnSave=document.querySelector(".button--save"),this.$btnLoad=document.querySelector(".button--load"),this.$btnInfo=document.querySelector(".button--info"),this.$canvas=document.querySelector("#canvas"),this.$blockEnd=document.querySelector(".block-ended"),this.$btnReplay=document.querySelector(".btn--replay"),this.$gameLevelSwitcher=document.querySelector(".game-level_switcher"),this.$playerInfoBlocks=[],this.$btnSecret=document.querySelector(".btn--secret"),this.secretCounter=0,this.infoOpened=!1}return function(e,t,n){t&&Fn(e.prototype,t),n&&Fn(e,n)}(e,[{key:"gamePause",value:function(){this.$gameWindow.classList.toggle("pause")}},{key:"gameSave",value:function(){if(Nn("savedGame")&&!confirm("У вас есть сохраненная игра, вы уверены, что хотите перезаписать сохранение?"))return;qn("savedGame",window.Game.getSavedGame()),qn("test","testvalue")}},{key:"gameLoad",value:function(){confirm("Ваш текущий прогресс будет потерян, вы уверены?")&&(Nn("savedGame")?window.Game.loadGame(Nn("savedGame")):alert("У вас нет сохраненных игр"))}},{key:"toggleInfo",value:function(){this.$blockInfo.classList.toggle("close"),window.Game.paused||(this.gamePause(),window.Game.pause()),this.infoOpened=!this.infoOpened}},{key:"gameWin",value:function(){this.$blockEnd.querySelector("h1").textContent="Победа!",this.$canvas.classList.add("ended"),this.$blockEnd.classList.remove("close")}},{key:"gameOver",value:function(){this.$blockEnd.querySelector("h1").textContent="Gameover! :(",this.$canvas.classList.add("ended"),this.$blockEnd.classList.remove("close")}},{key:"touchHandler",value:function(){}},{key:"secretButtonHandler",value:function(){9<=this.secretCounter?(this.$canvas.classList.toggle("secret"),this.secretCounter=0):this.secretCounter++}},{key:"setControls",value:function(t){var n=this;this.$gameLevelSwitcher.addEventListener("change",function(e){e.target.blur(),window.Game.switchGameLevel()}),this.$btnReplay.addEventListener("click",function(e){e.target.blur(),location.reload()}),document.addEventListener("keydown",function(e){return t(e)}),this.$btnSave.addEventListener("click",function(e){e.target.blur(),n.gameSave()}),this.$btnLoad.addEventListener("click",function(e){e.target.blur(),n.gameLoad()}),this.$btnInfo.addEventListener("click",function(e){e.target.blur(),n.toggleInfo()}),this.$btnSecret.addEventListener("click",function(e){e.target.blur(),n.secretButtonHandler()})}},{key:"createInterface",value:function(e){var f=this;e.players.forEach(function(e,t){var n=document.createElement("div"),i=document.createElement("span"),a=document.createElement("div"),s=new Image,o=document.createElement("div"),r=document.createElement("div"),c=document.createElement("span"),p=document.createElement("div");n.className="player_info player_info--".concat(e.id),a.className="player_info__avatar_wrapper",s.src=e.sprite.src,s.className="player_info__avatar",o.className="player_info__avatar_progress_bar",a.append(o),a.append(s),r.className="player_info__player_data",c.textContent=e.nickName,c.className="player_data__nickname",p.className="player_data__heaths",i.className="player_info__score",i.innerHTML="$<span class='score_value'>".concat(e.score,"</span>");for(var l=0;l<e.hp;l++){var h=new Image;h.src=Dn.a,h.className="heath",p.append(h)}r.append(c),r.append(p),r.append(i),n.append(a),n.append(r),f.$interface.append(n),f.$playerInfoBlocks.push(n)})}},{key:"interfaceReload",value:function(e){var c=this;e.players.forEach(function(t){var e=c.$playerInfoBlocks.find(function(e){return e.classList.contains("player_info--".concat(t.id))}),n=e.querySelector(".score_value"),i=e.querySelector(".player_info__avatar_progress_bar");if(n.textContent=t.score,e.getElementsByClassName("heath").length!==t.hp){var a=e.querySelector(".player_data__heaths");a.innerHTML="";for(var s=0;s<t.hp;s++){var o=new Image;o.src=Dn.a,o.className="heath",a.append(o)}}if(t.killed?i.classList.contains("active")||(i.classList.add("active"),i.style="width: 100%"):i.classList.contains("active")&&setTimeout(function(){i.classList.remove("active")},500),0<t.hp)if(0<t.rebornCounter){var r=t.rebornCounter/t.rebornTime*100;i.style="width: ".concat(r,"%")}else i.style="width: 0"})}}]),e}()),Zn=function(){function e(){Kn(this,e),this.canvas=document.querySelector("#canvas"),this.ctx=this.canvas.getContext("2d"),this.windowWidth=this.canvas.clientWidth,this.windowHeight=this.canvas.clientHeight,this.cellSize=40,this.drawBackground()}return Un(e,[{key:"drawObject",value:function(e){if(e.visible){var t=e.spriteWidth,n=e.spriteHeight,i=e.posX-this.cellSize/2,a=e.posY-this.cellSize/2;t&&n&&(i=e.posX-t/2,a=e.posY-n/2),e.spriteOffsetX&&(i+=e.spriteOffsetX),e.spriteOffsetY&&(a+=e.spriteOffsetY);try{this.ctx.drawImage(e.sprite,i,a,t||this.cellSize,n||this.cellSize)}catch(e){}}}},{key:"drawCell",value:function(e){e.object&&e.object.visible&&this.drawObject(e.object)}},{key:"drawBackground",value:function(){this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.windowWidth,this.windowHeight)}}]),e}();(new(function(){function t(e){Kn(this,t),(window.Game=this).ended=!1,this.gameHard=!1,this.eventList=[],this.Graphic=new Zn,this.gameInterval=null,this.gameField=[],this.gameSpeed=30,this.paused=!1,this.gameTime=0,this.gameTimer=null,this.stones=[],this.players=[],this.mobs=[],this.loot=[],this.traps=[],this.trapDuration=40,this.mapList=$n,this.allObjects=[].concat(Vn(this.stones),Vn(this.players),Vn(this.mobs)),this.mapCreate(this.mapList[0]),this.setControls(),Qn.createInterface({players:this.players}),this.gameSound=new Audio,this.gameSound.src=Hn.a,this.gameSound.loop=!0,this.gameSound.volume=.05,this.gameSound.play()}return Un(t,[{key:"addObject",value:function(e,t){switch(t){case"stone":this.stones.push(e);break;case"player":this.players.push(e);break;case"mob":this.mobs.push(e);break;case"loot":this.loot.push(e);break;case"trap":this.traps.push(e)}this.allObjects.push(e)}},{key:"removeObject",value:function(t){switch(this.allObjects=this.allObjects.filter(function(e){return e.id!==t.id}),t.type){case"stone":this.stones=this.stones.filter(function(e){return e.id!==t.id}),this.stonePositionAnalyse();break;case"player":this.players=this.players.filter(function(e){return e.id!==t.id});break;case"mob":this.mobs=this.mobs.filter(function(e){return e.id!==t.id});break;case"loot":this.loot=this.loot.filter(function(e){return e.id!==t.id});break;case"trap":this.traps=this.traps.filter(function(e){return e.id!==t.id});break;default:this.loot=this.loot.filter(function(e){return e.id!==t.id})}}},{key:"setControls",value:function(){var a=this;Qn.setControls(function(e){var t=Mn.player1,n=Mn.player2,i=Mn.global;if(!a.paused)switch(e.code){case t.up:a.players[0].control("up");break;case t.right:a.players[0].control("right");break;case t.down:a.players[0].control("down");break;case t.left:a.players[0].control("left");break;case t.stop:a.players[0].control("stop");break;case n.up:a.players[1].control("up");break;case n.right:a.players[1].control("right");break;case n.down:a.players[1].control("down");break;case n.left:a.players[1].control("left");break;case n.stop:a.players[1].control("stop")}if(e.code===i.pause){if(a.paused?a.start():a.pause(),Qn.infoOpened&&Qn.toggleInfo(),a.ended)return;Qn.gamePause()}})}},{key:"findCell",value:function(t){var n,i,e,a=[];this.gameField.forEach(function(e){e.forEach(function(e){return a.push(e)})});var s=this.Graphic.cellSize/2;if(t.fieldPosRow&&t.fieldPosColumn)e=a.find(function(e){return e.fieldPosRow===t.fieldPosRow&&e.fieldPosColumn===t.fieldPosColumn});else if(t.posX&&t.posY)n=t.posX,i=t.posY,e=a.find(function(e){return e.posX-s<=n&&e.posX+s>=n&&e.posY-s<=i&&e.posY+s>=i});else if(t.object&&t.direction){n=t.object.posX,i=t.object.posY;var o=a.find(function(e){return e.posX-s<=n&&e.posX+s>=n&&e.posY-s<=i&&e.posY+s>=i});if(!o)return null;switch(t.direction){case"top":e=this.findCell({fieldPosRow:o.fieldPosRow-1,fieldPosColumn:o.fieldPosColumn});break;case"right":e=this.findCell({fieldPosRow:o.fieldPosRow,fieldPosColumn:o.fieldPosColumn+1});break;case"bottom":e=this.findCell({fieldPosRow:o.fieldPosRow+1,fieldPosColumn:o.fieldPosColumn});break;case"left":e=this.findCell({fieldPosRow:o.fieldPosRow,fieldPosColumn:o.fieldPosColumn-1})}}return e}},{key:"stonePositionAnalyse",value:function(){var a=function(e,t){return this.gameField[e]&&this.gameField[e][t]&&0<this.gameField[e][t].objects.length&&"stone"===this.gameField[e][t].objects[0].type}.bind(this);this.gameField.forEach(function(e,i){e.forEach(function(e,t){if(0<e.objects.length&&"stone"===e.objects[0].type){var n=e.objects[0];a(i-1,t)&&a(i+1,t)&&a(i,t-1)&&a(i,t+1)?n.setSprite("connectedAll"):a(i-1,t)&&a(i+1,t)&&a(i,t+1)?n.setSprite("betweenVerticalConnectedRight"):a(i-1,t)&&a(i+1,t)&&a(i,t-1)?n.setSprite("betweenVerticalConnectedLeft"):a(i,t-1)&&a(i,t+1)&&a(i+1,t)?n.setSprite("betweenHorizontalConnectedBottom"):a(i,t-1)&&a(i,t+1)&&a(i-1,t)?n.setSprite("betweenHorizontalConnectedTop"):a(i+1,t)&&a(i,t+1)?n.setSprite("connectedBottomAndRight"):a(i+1,t)&&a(i,t-1)?n.setSprite("connectedBottomAndLeft"):a(i-1,t)&&a(i,t+1)?n.setSprite("connectedTopAndRight"):a(i-1,t)&&a(i,t-1)?n.setSprite("connectedTopAndLeft"):a(i,t+1)&&a(i,t-1)?n.setSprite("betweenHorizontal"):a(i+1,t)&&a(i-1,t)?n.setSprite("betweenVertical"):a(i-1,t)?n.setSprite("connectedTop"):a(i,t-1)?n.setSprite("connectedLeft"):a(i+1,t)?n.setSprite("connectedBottom"):a(i,t+1)&&n.setSprite("connectedRight")}})})}},{key:"addStone",value:function(e,t,n){var i;i=n||new jn("".concat(e,"_").concat(t)),this.addObject(i,"stone"),this.gameField[e][t].set(i)}},{key:"addStones",value:function(e){var a=this;e.forEach(function(e){var t=e[0],n=e[1],i=new jn("".concat(t,"_").concat(n));a.addObject(i,"stone"),a.gameField[t][n].set(i)})}},{key:"mapCreate",value:function(e){for(var a=this,t=0;t<this.Graphic.windowHeight/this.Graphic.cellSize;t++){this.gameField[t]=[];for(var n=0;n<this.Graphic.windowWidth/this.Graphic.cellSize;n++)if(this.gameField[t][n]=new An("".concat(t,"_").concat(n),n*this.Graphic.cellSize+this.Graphic.cellSize/2,t*this.Graphic.cellSize+this.Graphic.cellSize/2,t,n),0===t||t===this.Graphic.windowHeight/this.Graphic.cellSize-1||0===n||n===this.Graphic.windowWidth/this.Graphic.cellSize-1){var i=new jn("".concat(t,"_").concat(n));0===t||t===this.Graphic.windowHeight/this.Graphic.cellSize-1?0<n&&n<this.Graphic.windowWidth/this.Graphic.cellSize-1?i.setSprite("betweenHorizontal"):0===n?0===t?i.setSprite("connectedBottomAndRight"):i.setSprite("connectedTopAndRight"):0===t?i.setSprite("connectedBottomAndLeft"):i.setSprite("connectedTopAndLeft"):i.setSprite("betweenVertical"),this.addObject(i,"stone"),this.gameField[t][n].set(i)}}this.addStones(e.stoneList),e.holesInBaseStones.forEach(function(e){a.gameField[e[0]][e[1]].clear(!0)}),e.traps.forEach(function(e){var t=new Pn("".concat(e[0],"_").concat(e[1]),null,null,a.trapDuration);a.addObject(t,"trap"),a.gameField[e[0]][e[1]].set(t)}),e.playersFieldCoords.forEach(function(e,t){a.players[t]||(a.addObject(new Xn(t,null,null,"player".concat(t+1),0,a.players.length),"player"),a.gameField[e[0]][e[1]].set(a.players[t]))}),e.mobSpawnPoints.forEach(function(e,t){a.addObject(new On(t,null,null,"angry"),"mob"),a.gameField[e[0]][e[1]].set(a.mobs[t])}),this.stonePositionAnalyse(),this.gameField.forEach(function(e,i){e.forEach(function(e,t){if(0===e.objects.length){var n=new Tn("".concat(i,"_").concat(t),e.posX,e.posY);a.addObject(n,"loot"),e.set(n)}})})}},{key:"drawFrame",value:function(){var t=this;this.gameField.forEach(function(e){return e.forEach(function(e){t.Graphic.drawObject(e)})}),this.allObjects=this.allObjects.sort(function(e,t){return e.posY-t.posY}),this.traps.forEach(function(e){return t.Graphic.drawObject(e)}),this.allObjects.forEach(function(e){"trap"!==e.type&&t.Graphic.drawObject(e)})}},{key:"checkOverflow",value:function(){var t=this;[].concat(Vn(this.mobs),Vn(this.players)).forEach(function(e){e.posX>t.Graphic.windowWidth+t.Graphic.cellSize?e.posX=0-t.Graphic.cellSize:e.posX<0-t.Graphic.cellSize?e.posX=t.Graphic.windowWidth+t.Graphic.cellSize:e.posY>t.Graphic.windowHeight+t.Graphic.cellSize?e.posY=0-t.Graphic.cellSize:e.posY<0-t.Graphic.cellSize&&(e.posY=t.Graphic.windowHeight+t.Graphic.cellSize)})}},{key:"checkClash",value:function(){var n=this,e=[].concat(Vn(this.mobs),Vn(this.players));this.allObjects.forEach(function(t){e.forEach(function(e){t.material&&e.material&&t.checkClash(e,n.Graphic.cellSize)})})}},{key:"getGameTime",value:function(){return this.gameTime}},{key:"start",value:function(){var t=this;this.gameSound.play(),this.paused=!1,this.gameInterval=setInterval(function(){t.checkClash(),t.eventList.forEach(function(e){return e()}),t.eventList=[],t.allObjects.forEach(function(e){e.eventList&&0<e.eventList.length&&e.startEvents()}),t.checkOverflow(),t.drawFrame(),Qn.interfaceReload({players:t.players})},1/this.gameSpeed*1e3),this.gameTimer=setInterval(function(){t.allObjects.forEach(function(e){0<e.eventListByTime.length&&e.startEventsByTime(t.getGameTime())}),t.gameTime+=1},1e3)}},{key:"pause",value:function(){this.gameSound.pause(),this.paused=!0,clearInterval(this.gameInterval),clearInterval(this.gameTimer)}},{key:"getSavedGame",value:function(){var e={players:this.players.map(function(e){return{X:e.posX,Y:e.posY,score:e.score,playerNumber:e.playerNumber}}),mobs:this.mobs.map(function(e){return{X:e.posX,Y:e.posY,type:e.typeOfMob}}),loot:this.loot.map(function(e){return{X:e.posX,Y:e.posY}})};return JSON.stringify(e)}},{key:"loadGame",value:function(e){var t=this,n=JSON.parse(e);this.players=n.players.map(function(e,t){return new Xn(t,e.X,e.Y,"player_".concat(t),e.score,t)}),this.mobs=n.mobs.map(function(e,t){return new On(t,e.X,e.Y,e.type)}),this.loot=n.loot.map(function(e,t){return new Tn("".concat(t),e.X,e.Y)}),this.allObjects=[].concat(Vn(this.stones),Vn(this.traps),Vn(this.players),Vn(this.mobs),Vn(this.loot)),setTimeout(function(){t.pause(),Qn.gamePause()},100)}},{key:"gameWin",value:function(){this.pause(),this.ended=!0,Qn.gameWin()}},{key:"gameOver",value:function(){this.pause(),this.ended=!0,Qn.gameOver()}},{key:"switchGameLevel",value:function(){this.gameHard?this.players.forEach(function(e){return e.speed=5}):this.players.forEach(function(e){return e.speed=10}),this.gameHard=!this.gameHard}}]),t}())).start()}]);