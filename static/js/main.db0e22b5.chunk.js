(this["webpackJsonp@webchat_test/admin-ui"]=this["webpackJsonp@webchat_test/admin-ui"]||[]).push([[0],[,,,,,,,,,,,,function(e,n,t){},function(e,n,t){},,function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){"use strict";t.r(n);var c=t(1),s=t.n(c),o=t(7),r=t.n(o),i=(t(12),t(13),t(6)),a=t(2),u=s.a.createContext(void 0),l=window;l.reconnectionCount=0;var d=function e(n,t){try{var c=new WebSocket("wss://0cskis4880.execute-api.us-east-1.amazonaws.com/dev/");return c.onmessage=n,c.onclose=function(c){console.log("Socket closed by event:",c),console.log("Trying to reconnect..."),setTimeout((function(){if(l.reconnectionCount>=4)return console.error("Too many reconnection attempts"),void(t&&t("There are too many reconnection attempts. You are disconnected","error"));l.reconnectionCount++,console.log("!!!!!: ",l.reconnectionCount),clearTimeout(window.clearReconnectionCounterTimeOut);try{var c=e(n,t);window.clearReconnectionCounterTimeOut=setTimeout((function(){l.reconnectionCount=0}),1e4),console.log("Successfully reconnected: ",c)}catch(s){console.error("Error of reconnection: ",s),t&&t("You were disconnected from the chat","error")}}),1e3)},console.log("Successfully websocket connection:",c),c}catch(s){return console.log("Something went wrong while websocket connection: ",s),t&&t("You were disconnected from the chat","error"),null}},m=s.a.createContext(void 0),j=function(e,n){var t=Object(c.useState)(null),s=Object(a.a)(t,2),o=s[0],r=s[1],i=function(n){n.type in e?e[n.type](JSON.parse(n.data)):console.error("Unhandled socket event type {".concat(n.type,"}:"),n)};return Object(c.useEffect)((function(){var e=d(i,n);r(e),n&&e&&n("Successful connection to the chat. You can chat")}),[]),o},b=t(0),h=function(e){var n=e.children,t=Object(c.useState)([]),s=Object(a.a)(t,2),o=s[0],r=s[1],l=function(e){r((function(n){return[].concat(Object(i.a)(n),[e])}))},d=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";l({type:n,msg:e,id:(new Date).getTime().toString()})},h=j({message:function(e){console.log("Received message:",e),r((function(n){return[].concat(Object(i.a)(n),[e])}))}},d);return h?Object(b.jsx)(u.Provider,{value:{socket:h},children:Object(b.jsx)(m.Provider,{value:{messages:o,log:d},children:n})}):Object(b.jsx)(b.Fragment,{children:"Loading..."})},f=(t(15),t.p+"static/media/bg.30eec6b5.mp4"),g=t.p+"static/media/bg.6771a782.png",O=function(e){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("img",{src:g,className:"static_bg"}),Object(b.jsx)("video",{className:"live_bg",src:f,autoPlay:!0,loop:!0,muted:!0,width:"100%",height:"100%"})]})},_=(t(16),function(e){var n=Object(c.useContext)(m).messages,t=Object(c.useRef)(null);Object(c.useEffect)((function(){t.current&&(console.log(t.current.scrollHeight),t.current.scrollTop=t.current.scrollHeight)}),[n]);var s=n.map((function(e){if("type"in e)return Object(b.jsx)("li",{className:"message--system message--system--".concat(e.type),children:e.msg},e.id);var n=new Date(e.date);return Object(b.jsxs)("li",{className:"message ".concat((null===e||void 0===e?void 0:e.owner)?"my":""),children:[Object(b.jsxs)("span",{className:"message__time",children:[n.getHours(),":",n.getMinutes()]}),e.text]},e.id)}));return Object(b.jsx)("div",{ref:t,className:"messages_list_wrapper",children:Object(b.jsx)("ul",{className:"messages_list",children:s})})}),v=function(){var e=Object(c.useContext)(u).socket,n=Object(c.useContext)(m).log;return{sendMessage:function(t){try{!function(e,n){var t={action:"sendmessage",text:n.message};e.send(JSON.stringify(t))}(e,{message:t})}catch(c){n("Something went wrong with sending","error")}}}},w=(t(17),function(e){var n=Object(c.useState)(""),t=Object(a.a)(n,2),s=t[0],o=t[1],r=v().sendMessage,i=function(){s.length<=0||(o(""),r(s))};return Object(b.jsxs)("div",{className:"message_editor_container",children:[Object(b.jsx)("textarea",{onKeyDown:function(e){"Enter"===e.code&&(i(),e.preventDefault())},value:s,onChange:function(e){o(e.target.value)},name:"msg_editor",id:"msg_editor_textarea",cols:5,rows:10}),Object(b.jsx)("button",{onClick:i,className:"message_editor__send_button"})]})}),x=(t(18),function(e){var n=e.className,t=e.children,c=e.sideBar,s=(e.containerClassName,e.controls),o=e.toolbar;return Object(b.jsxs)("div",{className:"window ".concat(n||""),children:[Object(b.jsx)("div",{className:"window__header",children:Object(b.jsxs)("div",{className:"window_header__container",children:[s&&Object(b.jsx)("div",{className:"window__controls"}),o||null]})}),Object(b.jsxs)("div",{className:"window__inner",children:[c&&Object(b.jsx)("div",{className:"window__sidebar",children:c}),Object(b.jsx)("div",{className:"window__content",children:t})]})]})}),p=(t(19),t(20),t(21),[{id:"someid",userName:"Username"},{id:"someid23",userName:"Vladimir",owner:!0}]),N=function(e){var n=p.sort((function(e){return e.owner?-1:1})),t=Object(c.useState)(window.innerWidth),s=Object(a.a)(t,2),o=s[0],r=s[1];return Object(c.useEffect)((function(){var e=function(e){r(e.currentTarget.innerWidth)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),Object(b.jsx)("ul",{className:"main_sidebar__user_list ".concat(o<600?"min":""),children:n.map((function(e){return Object(b.jsxs)("li",{className:"user_list__user ".concat(e.owner?"my":""),children:[Object(b.jsx)("div",{className:"user__avatar",children:Object(b.jsx)("span",{children:e.userName[0].toUpperCase()})}),Object(b.jsx)("span",{className:"user__name",children:e.userName})]},e.id)}))})},y=function(e){return Object(b.jsx)("div",{className:"main_sidebar",children:Object(b.jsxs)("div",{className:"main_sidebar__inner main_sidebar__container",children:[Object(b.jsx)("h3",{className:"main_sidebar__title",children:"Users"}),Object(b.jsx)(N,{})]})})},C=function(e){return Object(b.jsx)(x,{className:"main_window",controls:!0,sideBar:Object(b.jsx)(y,{}),children:Object(b.jsxs)("div",{className:"main_window__container",children:[Object(b.jsx)(_,{}),Object(b.jsx)(w,{})]})})};var S=function(){return Object(b.jsx)(h,{children:Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(O,{}),Object(b.jsx)("div",{className:"app__container",children:Object(b.jsx)(C,{})})]})})},T=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,23)).then((function(n){var t=n.getCLS,c=n.getFID,s=n.getFCP,o=n.getLCP,r=n.getTTFB;t(e),c(e),s(e),o(e),r(e)}))};r.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(S,{})}),document.getElementById("root")),T()}],[[22,1,2]]]);
//# sourceMappingURL=main.db0e22b5.chunk.js.map