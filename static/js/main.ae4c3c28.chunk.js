(this["webpackJsonp@webchat_test/admin-ui"]=this["webpackJsonp@webchat_test/admin-ui"]||[]).push([[0],[,,,,,,,,,,,,function(e,n,t){},function(e,n,t){},,function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){"use strict";t.r(n);var c=t(1),s=t.n(c),i=t(6),a=t.n(i),r=(t(12),t(13),t(7)),o=t(2),d=s.a.createContext(void 0),l=function e(n){try{var t=new WebSocket("wss://0cskis4880.execute-api.us-east-1.amazonaws.com/dev/");return t.onmessage=n,t.onclose=function(t){console.log("Socket closed by event:",t),console.log("Trying to reconnect..."),setTimeout((function(){try{var t=e(n);console.log("Successfully reconnected: ",t)}catch(c){console.error("Error of reconnection: ",c)}}),1e3)},console.log("Successfully websocket connection:",t),t}catch(c){return console.log("Something went wrong while websocket connection: ",c),null}},u=s.a.createContext(void 0),j=function(e){var n=Object(c.useState)(null),t=Object(o.a)(n,2),s=t[0],i=t[1],a=function(n){n.type in e?e[n.type](JSON.parse(n.data)):console.error("Unhandled socket event type {".concat(n.type,"}:"),n)};return Object(c.useEffect)((function(){i(l(a))}),[]),s},m=t(0),b=function(e){var n=e.children,t=Object(c.useState)([]),s=Object(o.a)(t,2),i=s[0],a=s[1],l=j({message:function(e){console.log("Received message:",e),a((function(n){return[].concat(Object(r.a)(n),[e])}))}});return l?Object(m.jsx)(d.Provider,{value:{socket:l},children:Object(m.jsx)(u.Provider,{value:{messages:i},children:n})}):Object(m.jsx)(m.Fragment,{children:"Loading..."})},_=(t(15),t.p+"static/media/bg.8283151c.mp4"),O=function(e){return Object(m.jsx)("video",{className:"live_bg",src:_,autoPlay:!0,loop:!0,muted:!0,width:"100%",height:"100%"})},f=(t(16),function(e){var n=Object(c.useContext)(u).messages.map((function(e){var n=new Date(e.date);return Object(m.jsxs)("li",{className:"".concat((null===e||void 0===e?void 0:e.owner)?"my":""),children:[Object(m.jsxs)("span",{className:"message__time",children:[n.getHours(),":",n.getMinutes()]}),e.text]},e.id)}));return Object(m.jsx)("ul",{className:"messages_list",children:n})}),h=function(){var e=Object(c.useContext)(d).socket;return{sendMessage:function(n){!function(e,n){var t={action:"sendmessage",text:n.message};e.send(JSON.stringify(t))}(e,{message:n})}}},v=(t(17),function(e){var n=Object(c.useState)(""),t=Object(o.a)(n,2),s=t[0],i=t[1],a=h().sendMessage,r=function(){s.length<=0||(i(""),a(s))};return Object(m.jsxs)("div",{className:"message_editor_container",children:[Object(m.jsx)("textarea",{onKeyDown:function(e){"Enter"===e.code&&(r(),e.preventDefault())},value:s,onChange:function(e){i(e.target.value)},name:"msg_editor",id:"msg_editor_textarea",cols:5,rows:10}),Object(m.jsx)("button",{onClick:r,className:"message_editor__send_button"})]})}),x=(t(18),function(e){var n=e.className,t=e.children,c=e.sideBar,s=(e.containerClassName,e.controls),i=e.toolbar;return Object(m.jsxs)("div",{className:"window ".concat(n||""),children:[Object(m.jsx)("div",{className:"window__header",children:Object(m.jsxs)("div",{className:"window_header__container",children:[s&&Object(m.jsx)("div",{className:"window__controls"}),i||null]})}),Object(m.jsxs)("div",{className:"window__inner",children:[c&&Object(m.jsx)("div",{className:"window__sidebar",children:c}),Object(m.jsx)("div",{className:"window__content",children:t})]})]})}),w=(t(19),t(20),t(21),[{id:"someid",userName:"Username"},{id:"someid23",userName:"Vladimir",owner:!0}]),g=function(e){var n=w.sort((function(e){return e.owner?-1:1})),t=Object(c.useState)(window.innerWidth),s=Object(o.a)(t,2),i=s[0],a=s[1];return Object(c.useEffect)((function(){var e=function(e){a(e.currentTarget.innerWidth)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),Object(m.jsx)("ul",{className:"main_sidebar__user_list ".concat(i<600?"min":""),children:n.map((function(e){return Object(m.jsxs)("li",{className:"user_list__user ".concat(e.owner?"my":""),children:[Object(m.jsx)("div",{className:"user__avatar",children:Object(m.jsx)("span",{children:e.userName[0].toUpperCase()})}),Object(m.jsx)("span",{className:"user__name",children:e.userName})]},e.id)}))})},N=function(e){return Object(m.jsx)("div",{className:"main_sidebar",children:Object(m.jsxs)("div",{className:"main_sidebar__inner main_sidebar__container",children:[Object(m.jsx)("h3",{className:"main_sidebar__title",children:"Users"}),Object(m.jsx)(g,{})]})})},p=function(e){return Object(m.jsx)(x,{className:"main_window",controls:!0,sideBar:Object(m.jsx)(N,{}),children:Object(m.jsxs)("div",{className:"main_window__container",children:[Object(m.jsx)(f,{}),Object(m.jsx)(v,{})]})})};var y=function(){return Object(m.jsx)(b,{children:Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(O,{}),Object(m.jsx)("div",{className:"app__container",children:Object(m.jsx)(p,{})})]})})},S=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,23)).then((function(n){var t=n.getCLS,c=n.getFID,s=n.getFCP,i=n.getLCP,a=n.getTTFB;t(e),c(e),s(e),i(e),a(e)}))};a.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(y,{})}),document.getElementById("root")),S()}],[[22,1,2]]]);
//# sourceMappingURL=main.ae4c3c28.chunk.js.map