(this["webpackJsonp@webchat_test/admin-ui"]=this["webpackJsonp@webchat_test/admin-ui"]||[]).push([[0],[,,,,,,,,,,,,function(e,n,t){},function(e,n,t){},,function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){"use strict";t.r(n);var s=t(1),c=t.n(s),i=t(6),a=t.n(i),r=(t(12),t(13),t(7)),o=t(2),d=c.a.createContext(void 0),l=function e(n){try{var t=new WebSocket("wss://0cskis4880.execute-api.us-east-1.amazonaws.com/dev/");return t.onmessage=n,t.onclose=function(t){console.log("Socket closed by event:",t),console.log("Trying to reconnect..."),setTimeout((function(){try{var t=e(n);console.log("Successfully reconnected: ",t)}catch(s){console.error("Error of reconnection: ",s)}}),1e3)},console.log("Successfully websocket connection:",t),t}catch(s){return console.log("Something went wrong while websocket connection: ",s),null}},u=c.a.createContext(void 0),j=function(e){var n=Object(s.useState)(null),t=Object(o.a)(n,2),c=t[0],i=t[1],a=function(n){n.type in e?e[n.type](JSON.parse(n.data)):console.error("Unhandled socket event type {".concat(n.type,"}:"),n)};return Object(s.useEffect)((function(){i(l(a))}),[]),c},m=t(0),b=function(e){var n=e.children,t=Object(s.useState)([]),c=Object(o.a)(t,2),i=c[0],a=c[1],l=j({message:function(e){console.log("Received message:",e),a((function(n){return[].concat(Object(r.a)(n),[e])}))}});return l?Object(m.jsx)(d.Provider,{value:{socket:l},children:Object(m.jsx)(u.Provider,{value:{messages:i},children:n})}):Object(m.jsx)(m.Fragment,{children:"Loading..."})},_=(t(15),t.p+"static/media/bg.30eec6b5.mp4"),O=t.p+"static/media/bg.6771a782.png",h=function(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("img",{src:O,className:"static_bg"}),Object(m.jsx)("video",{className:"live_bg",src:_,autoPlay:!0,loop:!0,muted:!0,width:"100%",height:"100%"})]})},f=(t(16),function(e){var n=Object(s.useContext)(u).messages.map((function(e){var n=new Date(e.date);return Object(m.jsxs)("li",{className:"".concat((null===e||void 0===e?void 0:e.owner)?"my":""),children:[Object(m.jsxs)("span",{className:"message__time",children:[n.getHours(),":",n.getMinutes()]}),e.text]},e.id)}));return Object(m.jsx)("ul",{className:"messages_list",children:n})}),v=function(){var e=Object(s.useContext)(d).socket;return{sendMessage:function(n){!function(e,n){var t={action:"sendmessage",text:n.message};e.send(JSON.stringify(t))}(e,{message:n})}}},x=(t(17),function(e){var n=Object(s.useState)(""),t=Object(o.a)(n,2),c=t[0],i=t[1],a=v().sendMessage,r=function(){c.length<=0||(i(""),a(c))};return Object(m.jsxs)("div",{className:"message_editor_container",children:[Object(m.jsx)("textarea",{onKeyDown:function(e){"Enter"===e.code&&(r(),e.preventDefault())},value:c,onChange:function(e){i(e.target.value)},name:"msg_editor",id:"msg_editor_textarea",cols:5,rows:10}),Object(m.jsx)("button",{onClick:r,className:"message_editor__send_button"})]})}),g=(t(18),function(e){var n=e.className,t=e.children,s=e.sideBar,c=(e.containerClassName,e.controls),i=e.toolbar;return Object(m.jsxs)("div",{className:"window ".concat(n||""),children:[Object(m.jsx)("div",{className:"window__header",children:Object(m.jsxs)("div",{className:"window_header__container",children:[c&&Object(m.jsx)("div",{className:"window__controls"}),i||null]})}),Object(m.jsxs)("div",{className:"window__inner",children:[s&&Object(m.jsx)("div",{className:"window__sidebar",children:s}),Object(m.jsx)("div",{className:"window__content",children:t})]})]})}),w=(t(19),t(20),t(21),[{id:"someid",userName:"Username"},{id:"someid23",userName:"Vladimir",owner:!0}]),N=function(e){var n=w.sort((function(e){return e.owner?-1:1})),t=Object(s.useState)(window.innerWidth),c=Object(o.a)(t,2),i=c[0],a=c[1];return Object(s.useEffect)((function(){var e=function(e){a(e.currentTarget.innerWidth)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),Object(m.jsx)("ul",{className:"main_sidebar__user_list ".concat(i<600?"min":""),children:n.map((function(e){return Object(m.jsxs)("li",{className:"user_list__user ".concat(e.owner?"my":""),children:[Object(m.jsx)("div",{className:"user__avatar",children:Object(m.jsx)("span",{children:e.userName[0].toUpperCase()})}),Object(m.jsx)("span",{className:"user__name",children:e.userName})]},e.id)}))})},p=function(e){return Object(m.jsx)("div",{className:"main_sidebar",children:Object(m.jsxs)("div",{className:"main_sidebar__inner main_sidebar__container",children:[Object(m.jsx)("h3",{className:"main_sidebar__title",children:"Users"}),Object(m.jsx)(N,{})]})})},y=function(e){return Object(m.jsx)(g,{className:"main_window",controls:!0,sideBar:Object(m.jsx)(p,{}),children:Object(m.jsxs)("div",{className:"main_window__container",children:[Object(m.jsx)(f,{}),Object(m.jsx)(x,{})]})})};var S=function(){return Object(m.jsx)(b,{children:Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(h,{}),Object(m.jsx)("div",{className:"app__container",children:Object(m.jsx)(y,{})})]})})},k=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,23)).then((function(n){var t=n.getCLS,s=n.getFID,c=n.getFCP,i=n.getLCP,a=n.getTTFB;t(e),s(e),c(e),i(e),a(e)}))};a.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(S,{})}),document.getElementById("root")),k()}],[[22,1,2]]]);
//# sourceMappingURL=main.63f133a8.chunk.js.map